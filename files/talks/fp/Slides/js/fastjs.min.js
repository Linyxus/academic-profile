!function(u,d,e){var n=function(e){var a={Version:9.1,ServerUrl:e+"//cdn.webfont.com/fast/post",MD5UrlTemplate:e+"//cdn.webfont.com/fast/script/",CdnMD5UrlTemplate:e+"//cdn.webfont.com/fast/script/",Protocol:e,HttpMethod:{GET:"GET",POST:"POST"}},t={internalGlobalSettings:{fontfaceStyle:[]},drawed:!1,promises:[],localArray:[],remoteArray:[],applyFontfaceArray:[],fontfaceArray:[],isSync:!1,url:"",md5jsURl:"",preContents:[],adminContents:[],init:function(){var e=$youziku.UrlModule.getUrl(!1);if($youziku.UrlModule.loadSync){var t=encodeURI(decodeURI($youziku.UrlModule.getSubmitUrl(e)));this.url=t;var n=$youziku.Md5Module.encrypt(t),o=a.CdnMD5UrlTemplate+n+".js",r=a.MD5UrlTemplate+n+".js";this.requestAndRunMd5js(o),this.md5jsURl=r}var i=this;u.addEventListener?u.addEventListener("load",function(){i.checkLoad()}):u.attachEvent("onload",function(){i.checkLoad()})},submitToServer:function(){var e=0,t=[];for(var n in this.localArray){var o=this.preContents[this.localArray[n].selector];o==undefined&&(o="");var r=this.adminContents[this.localArray[n].selector];r==undefined&&(r="");var i=$youziku.TextModule.getText(this.localArray[n].selector,o+r),a=$youziku.Md5Module.encrypt(i);if(""!==i&&(undefined==this.remoteArray[n]||a!==this.remoteArray[n].contentMd5||this.localArray[n].accessKey!==this.remoteArray[n].accessKey)){if(t.push({k:"s"+e,v:this.localArray[n].selector}),t.push({k:"k"+e,v:this.localArray[n].accessKey}),t.push({k:"a"+e,v:!0}),""!==o){var u=$youziku.TextModule.getText(this.localArray[n].selector,r);t.push({k:"m"+e,v:$youziku.Md5Module.encrypt(u)}),t.push({k:"t"+e,v:u})}else t.push({k:"m"+e,v:a}),t.push({k:"t"+e,v:i});e++}}var l=[];for(var n in this.remoteArray)""!==n&&undefined===this.localArray[n]&&(t.push({k:"s"+e,v:this.remoteArray[n].selector}),t.push({k:"k"+e,v:$youziku.TextModule.trim(this.remoteArray[n].accessKey)}),t.push({k:"a"+e,v:!1}),t.push({k:"m"+e,v:""}),t.push({k:"t"+e,v:""}),e++,l.push(n));for(var c=0;c<l.length;c++)delete this.remoteArray[l[c]];if(0<e){t.push({k:"num",v:e});var s=this.url?this.url:$youziku.UrlModule.getPageUrl();t.push({k:"url",v:s});for(var f="",d=0;d<t.length;d++)d>=t.length-1?f+=t[d].k+"="+encodeURIComponent($youziku.TextModule.trim(t[d].v)):f+=t[d].k+"="+encodeURIComponent($youziku.TextModule.trim(t[d].v))+"&";this.makeWebFont(f)}},checkLoad:function(){this.isSync?this.syncMode():this.asyncMode()},asyncMode:function(){if(!(this.promises.length<=0)){var t=this;Promise.all(t.promises).then(function(e){e.length===t.promises.length&&(t.isSync||(t.isSync=!0,t.syncMode()))},function(e){console.error("webfont.com:"+e)})}},syncMode:function(){this.drawed||(this.drawed=!0,this.submitToServer())},makeWebFont:function(e){var n=this;$youziku.HttpModule.request(a.HttpMethod.POST,a.ServerUrl,!0,e,function(e){var t=JSON.parse(e);n.showMsg(t)},function(){})},showMsg:function(e){console.log("%c有字库Api生成服务器响应:","color:#35bc73;font-size:23px;");var t=e.Result,n="green";"warn"===t||"null"===t?n="#FF7F24":"error"===t&&(n="red"),console.log("\t%c code:"+e.Code," font-size:16px;color:"+n),console.log("\t%c errMsg:"+e.Value," font-size:16px;color:"+n),this.requestAndRunMd5js(this.md5jsURl+"?refreshToken="+Math.random())},requestAndRunMd5js:function(e){var t;$youziku.HttpModule.request(a.HttpMethod.GET,e,!1,null,function(e){t=e},function(){t="$youziku.verify('', '','');"});try{window.execScript(t)}catch(n){window.eval(t)}},writeContent:function(e,t){this.preContents[e]=t},appendContent:function(e,t){this.adminContents[e]=t},applyNewFontface:function(){if(this.fontfaceArray)for(var e=0;e<this.fontfaceArray.length;e++){var t=this.fontfaceArray[e],n="";for(var o in this.internalGlobalSettings.fontfaceStyle){if(this.internalGlobalSettings.fontfaceStyle.hasOwnProperty(o))n+=o+":"+this.internalGlobalSettings.fontfaceStyle[o]+";";$youziku.FontfaceModule.remove(t);var r=t.replace("}",n+"}");$youziku.FontfaceModule.remove(r),$youziku.FontfaceModule.add(r)}}var i=this.applyFontfaceArray;if(i)for(var a in i)if(i.hasOwnProperty(a)){var u=i[a],l=u.Tag,c=u.Fontfamily,s=u.YzkSysFontfamily,f=u.ApplyFontface,d=this.localArray[l];if(!d)continue;var p="";if(!d.fontFamily)continue;var h=$youziku.TextModule.trim(d.fontFamily.replace(/'/g," ").replace(/"/g," "));if($youziku.TextModule.trim(c)===h)continue;var y=h.split(",");if(y.length<=1)continue;for(var v=!1,g=0;g<y.length;g++){var M=y[g];$youziku.TextModule.trim(M)===c&&(v=!0,y[g]=s)}v||y.push(s);for(var m=0;m<y.length;m++)m===y.length-1?p+=y[m]:p+=y[m]+",";if(""===p)continue;var k=p.split(",");if(k.length<=1)continue;for(var A="",x=0;x<k.length;x++){var F=k[x];F=$youziku.TextModule.trim(F),x===k.length-1?-1!==F.indexOf("'")&&-1!==F.lastIndexOf("'")||-1!==F.indexOf('"')&&-1!==F.lastIndexOf('"')?A+=F:A+="'"+F+"'":-1!==F.indexOf("'")&&-1!==F.lastIndexOf("'")||-1!==F.indexOf('"')&&-1!==F.lastIndexOf('"')?A+=F+",":A+="'"+F+"',"}$youziku.FontfaceModule.remove(f);var w=f.replace($youziku.TextModule.trim("'"+s+"'"),A);$youziku.FontfaceModule.remove(w),$youziku.FontfaceModule.add(w)}}};return new n.prototype.ApiModule(a,t)};n.fn=n.prototype={ApiModule:function(l,c){var a=this,i=function(i){this.applyFontByTag=function(e,t,n,o){var r=e.replace(/(^\s*)|(\s*$)/g,"");i.localArray[r]={selector:r,accessKey:a.TextModule.trim(t),fontFamily:n,a:o||!1}}};this.run=function(){c.init()},this.load=function(n,e,t,o){var r=new i(c);return r.applyFontByTag(n,e,t,o),{mobile:function(e,t){$youziku.EnvironmentModule.isMobile()&&r.applyFontByTag(n,e,t)}}},this.attach=function(e){var t=new Promise(e);return c.promises.push(t),t},this.submit=function(e,t){var n;n=t?e+"_"+t:e;var o=this.UrlModule.getUrl(!0),r=encodeURI(decodeURI(this.UrlModule.getSubmitUrl(o+"_"+n)));c.url=r;var i=this.Md5Module.encrypt(r),a=l.CdnMD5UrlTemplate+i+".js",u=l.MD5UrlTemplate+i+".js";c.requestAndRunMd5js(a),c.md5jsURl=u,c.submitToServer()},this.ajaxfont=function(){c.isSync||(c.isSync=!0,c.syncMode())},this.verify=function(e,t,n){c.remoteArray[e]={selector:e,contentMd5:t,accessKey:n}},this.draw=function(e){c.isSync=null==e,this.load=function(e){},c.applyNewFontface()},this.css=function(e){c.fontfaceArray.push(e),this.FontfaceModule.remove(e),this.FontfaceModule.add(e)},this.applyFontface=function(e,t,n,o){c.applyFontfaceArray[o]={Tag:o,Fontfamily:n,ApplyFontface:e,YzkSysFontfamily:t},this.FontfaceModule.remove(e),this.FontfaceModule.add(e),c.applyNewFontface()},this.writeContent=function(e,t){c.writeContent(e,t)},this.appendContent=function(e,t){c.appendContent(e,t)},this.globalSetting={fontfaceStyle:{add:function(e,t){c.internalGlobalSettings.fontfaceStyle[e]=t}}}},Md5Module:{encrypt:function(e){function u(e,t,n,o,r,i){return y(a(y(y(t,e),y(o,i)),r),n)}function f(e,t,n,o,r,i,a){return u(t&n|~t&o,e,t,r,i,a)}function d(e,t,n,o,r,i,a){return u(t&o|n&~o,e,t,r,i,a)}function p(e,t,n,o,r,i,a){return u(t^n^o,e,t,r,i,a)}function h(e,t,n,o,r,i,a){return u(n^(t|~o),e,t,r,i,a)}var a=function(e,t){return e<<t|e>>>32-t},y=function(e,t){var n=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(n>>16)<<16|65535&n};return function(e){for(var t="0123456789abcdef",n="",o=0;o<4*e.length;o++)n+=t.charAt(e[o>>2]>>o%4*8+4&15)+t.charAt(e[o>>2]>>o%4*8&15);return n}(function(e,t){e[t>>5]|=128<<t%32,e[14+(t+64>>>9<<4)]=t;for(var n=1732584193,o=-271733879,r=-1732584194,i=271733878,a=0;a<e.length;a+=16){var u=n,l=o,c=r,s=i;n=f(n,o,r,i,e[a+0],7,-680876936),i=f(i,n,o,r,e[a+1],12,-389564586),r=f(r,i,n,o,e[a+2],17,606105819),o=f(o,r,i,n,e[a+3],22,-1044525330),n=f(n,o,r,i,e[a+4],7,-176418897),i=f(i,n,o,r,e[a+5],12,1200080426),r=f(r,i,n,o,e[a+6],17,-1473231341),o=f(o,r,i,n,e[a+7],22,-45705983),n=f(n,o,r,i,e[a+8],7,1770035416),i=f(i,n,o,r,e[a+9],12,-1958414417),r=f(r,i,n,o,e[a+10],17,-42063),o=f(o,r,i,n,e[a+11],22,-1990404162),n=f(n,o,r,i,e[a+12],7,1804603682),i=f(i,n,o,r,e[a+13],12,-40341101),r=f(r,i,n,o,e[a+14],17,-1502002290),o=f(o,r,i,n,e[a+15],22,1236535329),n=d(n,o,r,i,e[a+1],5,-165796510),i=d(i,n,o,r,e[a+6],9,-1069501632),r=d(r,i,n,o,e[a+11],14,643717713),o=d(o,r,i,n,e[a+0],20,-373897302),n=d(n,o,r,i,e[a+5],5,-701558691),i=d(i,n,o,r,e[a+10],9,38016083),r=d(r,i,n,o,e[a+15],14,-660478335),o=d(o,r,i,n,e[a+4],20,-405537848),n=d(n,o,r,i,e[a+9],5,568446438),i=d(i,n,o,r,e[a+14],9,-1019803690),r=d(r,i,n,o,e[a+3],14,-187363961),o=d(o,r,i,n,e[a+8],20,1163531501),n=d(n,o,r,i,e[a+13],5,-1444681467),i=d(i,n,o,r,e[a+2],9,-51403784),r=d(r,i,n,o,e[a+7],14,1735328473),o=d(o,r,i,n,e[a+12],20,-1926607734),n=p(n,o,r,i,e[a+5],4,-378558),i=p(i,n,o,r,e[a+8],11,-2022574463),r=p(r,i,n,o,e[a+11],16,1839030562),o=p(o,r,i,n,e[a+14],23,-35309556),n=p(n,o,r,i,e[a+1],4,-1530992060),i=p(i,n,o,r,e[a+4],11,1272893353),r=p(r,i,n,o,e[a+7],16,-155497632),o=p(o,r,i,n,e[a+10],23,-1094730640),n=p(n,o,r,i,e[a+13],4,681279174),i=p(i,n,o,r,e[a+0],11,-358537222),r=p(r,i,n,o,e[a+3],16,-722521979),o=p(o,r,i,n,e[a+6],23,76029189),n=p(n,o,r,i,e[a+9],4,-640364487),i=p(i,n,o,r,e[a+12],11,-421815835),r=p(r,i,n,o,e[a+15],16,530742520),o=p(o,r,i,n,e[a+2],23,-995338651),n=h(n,o,r,i,e[a+0],6,-198630844),i=h(i,n,o,r,e[a+7],10,1126891415),r=h(r,i,n,o,e[a+14],15,-1416354905),o=h(o,r,i,n,e[a+5],21,-57434055),n=h(n,o,r,i,e[a+12],6,1700485571),i=h(i,n,o,r,e[a+3],10,-1894986606),r=h(r,i,n,o,e[a+10],15,-1051523),o=h(o,r,i,n,e[a+1],21,-2054922799),n=h(n,o,r,i,e[a+8],6,1873313359),i=h(i,n,o,r,e[a+15],10,-30611744),r=h(r,i,n,o,e[a+6],15,-1560198380),o=h(o,r,i,n,e[a+13],21,1309151649),n=h(n,o,r,i,e[a+4],6,-145523070),i=h(i,n,o,r,e[a+11],10,-1120210379),r=h(r,i,n,o,e[a+2],15,718787259),o=h(o,r,i,n,e[a+9],21,-343485551),n=y(n,u),o=y(o,l),r=y(r,c),i=y(i,s)}return Array(n,o,r,i)}(function(e){for(var t=Array(),n=0;n<8*e.length;n+=8)t[n>>5]|=(255&e.charCodeAt(n/8))<<n%32;return t}(e),8*e.length))}},UrlModule:{loadSync:!0,getPageUrl:function(){var e,t=(new $youziku.PunycodeModule).toASCII(location.hostname);return e=""===location.port.toString()?"":":"+location.port,location.protocol+"//"+t+e+location.pathname+location.search+location.hash},getUrl:function(e){var t,n,p=function(e,t,n){var o=e.split("?")[1];if(null==o||""==o)return e.split("?")[0];for(var r=o.split("&"),i="",a=o,u=0;u<r.length;u++)for(var l=0;l<t.length;l++)if(r[u].split("=")[0].toLowerCase()==t[l])if(n)if(-1==r[u].split("=")[1].indexOf("%3F"))i=i+r[u]+"&";else{var c=r[u].split("=")[1];c=c.replace(/%3A/g,":").replace(/%2F/g,"/").replace(/%3F/g,"?").replace(/%3D/g,"=").replace(/%26/g,"&"),c=(c=p(c,t,n)).replace(/:/g,"%3A").replace(/\//g,"%2F").replace(/\?/g,"%3F").replace(/=/g,"%3D").replace(/&/g,"%26"),i=i+t[l]+"="+c+"&"}else{var s=new RegExp(r[u]+"&","gi"),f=new RegExp("&"+r[u],"gi"),d=new RegExp(r[u],"gi");a=a.replace(s,"").replace(f,"").replace(d,"")}return e=n?""==i?e.split("?")[0]:e.split("?")[0]+"?"+i.substr(0,i.length-1):""==a?e.split("?")[0]:e.split("?")[0]+"?"+a},o=$youziku.UrlModule.getPageUrl(),r=o.toLowerCase();if(-1!==r.indexOf("openid=")||-1!==r.indexOf("&token=")||-1!==r.indexOf("?token=")||-1!==r.indexOf("&openid=")||-1!==r.indexOf("?accesstoken=")||-1!==r.indexOf("&accesstoken=")||-1!==r.indexOf("?callback=")||-1!==r.indexOf("&callback=")||-1!==r.indexOf("?refresh_token=")||-1!==r.indexOf("&refresh_token=")||-1!==r.indexOf("?access_token=")||-1!==r.indexOf("&access_token="))return p(o,"openid,token,accesstoken,callback,access_token,refresh_token".split(","),!1);if(e)for(var i=d.scripts,a=0;a<i.length;a++){var u=i[a].src,l=u.split("/"),c=l[l.length-1];if(-1!==c.indexOf("youziku")||-1!==c.indexOf("webfont")||-1!==c.indexOf("fastjs")){t=u;break}}else t=d.scripts[d.scripts.length-1].src;if(-1!==(t=undefined==t?"":t).indexOf("#async")&&(this.loadSync=!1),-1===t.indexOf("?"))return o;var s=(n=t.split("?")[1].split("&")[0].split("|"))[0].split("=")[1];if(null==s||"noparam"===s||""===s)return o.split("?")[0];var f="param"===n[0].split("=")[0];return n[0]=s,p(o,n,f)},getSubmitUrl:function(e){return $youziku.EnvironmentModule.isMobile()?e+"#youziku-mobile=true":e}},HttpModule:{request:function(e,t,n,o,r,i){var a=function(){if(window.ActiveXObject)for(var e=["MSXML2.XMLHttp.6.0","MSXML2.XMLHttp.5.0","MSXML2.XMLHttp.4.0","MSXML2.XMLHttp.3.0","MSXML2.XMLHttp","Microsoft.XMLHttp"],t=0;t<e.length;t++)try{return new ActiveXObject(e[t])}catch(n){}else try{return new XMLHttpRequest}catch(o){}}();try{a.open(e,t,n),"POST"!==e&&"post"!==e||a.setRequestHeader("Content-Type","application/x-www-form-urlencoded;"),a.onreadystatechange=function(){4===a.readyState&&(200===a.status||304===a.status?r(a.responseText):404===a.status&&i())},a.send(o)}catch(u){}}},TextModule:{trim:function(e){return e.toString().replace(/(^\s*)|(\s*$)/g,"")},removeDuplicate2:function(e){return e.replace(/(.)(?=.*\1)/g,"")},getText:function(e,t){var n=t,o={};o=document.querySelectorAll(e);for(var r=0;r<o.length;r++)n+=o[r].innerHTML.replace(/[\r\n]/g,"").replace(/<!--.*?-->/g,"").replace(/<script.*?>.*?<\/script>/gi,"").replace(/<select.*?>.*?<\/select>/gi,"").replace(/<\/?[^>]*>/g,"").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&amp;/g,"").replace(/&nbsp;/g,"").replace(/&quot;/g,'"').replace(/&/g,"").replace(/\s/g,"").replace("<","<=");return n=this.replaceEmoji(n),new RegExp("[A-Za-z]").test(n)&&(n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz"+n),new RegExp("[0-9]").test(n)&&(n="0123456789"+n),n=(n=this.removeDuplicate2(n)).split("").sort(function(e,t){return e.charCodeAt(0)-t.charCodeAt(0)}).join("")},replaceEmoji:function(e){return e.replace(/[\uD83C|\uD83D|\uD83E][\uDC00-\uDFFF][\u200D|\uFE0F]|[\uD83C|\uD83D|\uD83E][\uDC00-\uDFFF]|[0-9|*|#]\uFE0F\u20E3|[0-9|#]\u20E3|[\u203C-\u3299]\uFE0F\u200D|[\u203C-\u3299]\uFE0F|[\u2122-\u2B55]|\u303D|[\\A9|\\AE]\u3030|\\uA9|\\uAE|\u3030/gi,"")}},FontfaceModule:{remove:function(e){var t=d.getElementsByTagName("head")[0];try{for(var n=d.getElementsByTagName("style"),o=0;o<n.length;o++){var r=n[o];$youziku.TextModule.trim(r.innerHTML)===$youziku.TextModule.trim(e)&&t.removeChild(r)}}catch(i){}},add:function(e){var t=d.getElementsByTagName("head")[0],n=d.createElement("style");n.setAttribute("type","text/css"),t.appendChild(n),n.styleSheet?n.styleSheet.cssText=e:d.getBoxObjectFor?n.innerHTML=e:n.appendChild(d.createTextNode(e))}},PunycodeModule:function(){function t(){var M=2147483647,m=36,k=1,A=26,r=38,i=700,x=72,F=128,w="-",t=/^xn--/,n=/[^\x20-\x7E]/,a=/[\x2E\u3002\uFF0E\uFF61]/g,o={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},u=m-k,S=Math.floor,T=String.fromCharCode;function C(e){throw RangeError(o[e])}function z(e,t){for(var n=e.length,o=[];n--;)o[n]=t(e[n]);return o}function l(e,t){var n=e.split("@"),o="";return 1<n.length&&(o=n[0]+"@",e=n[1]),o+z((e=e.replace(a,".")).split("."),t).join(".")}function b(e,t,n){var o=0;for(e=n?S(e/i):e>>1,e+=S(e/t);u*A>>1<e;o+=m)e=S(e/u);return S(o+(u+1)*e/(e+r))}function c(e){var t,n,o,r,i,a,u,l,c,s,f,d=[],p=e.length,h=0,y=F,v=x;for((n=e.lastIndexOf(w))<0&&(n=0),o=0;o<n;++o)128<=e.charCodeAt(o)&&C("not-basic"),d.push(e.charCodeAt(o));for(r=0<n?n+1:0;r<p;){for(i=h,a=1,u=m;p<=r&&C("invalid-input"),f=e.charCodeAt(r++),(m<=(l=f-48<10?f-22:f-65<26?f-65:f-97<26?f-97:m)||l>S((M-h)/a))&&C("overflow"),h+=l*a,!(l<(c=u<=v?k:v+A<=u?A:u-v));u+=m)a>S(M/(s=m-c))&&C("overflow"),a*=s;v=b(h-i,t=d.length+1,0==i),S(h/t)>M-y&&C("overflow"),y+=S(h/t),h%=t,d.splice(h++,0,y)}return function g(e){return z(e,function(e){var t="";return 65535<e&&(t+=T((e-=65536)>>>10&1023|55296),e=56320|1023&e),t+=T(e)}).join("")}(d)}this.toUnicode=function(e){return l(e,function(e){return t.test(e)?c(e.slice(4).toLowerCase()):e})},this.toASCII=function(e){return l(e,function(e){return n.test(e)?c(e.slice(4).toLowerCase()):e})}}this.toASCII=function(e){return(new t).toASCII(e)},this.toUnicode=function(e){return(new t).toUnicode(e)}},EnvironmentModule:{isMobile:function(){return/(iPhone|iPad|iPod|iOS|Android)/i.test(e.userAgent)}}},n.prototype.ApiModule.prototype=n.fn;var t="http:"===document.location.protocol?"http:":"https:";u.$youziku=n(t),u.$webfont=u.$youziku,u.$youziku.run()}(window,document,navigator);